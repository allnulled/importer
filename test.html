<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Importer</title>
    <script src="importer.js"></script>
</head>
<body>
    <pre id="test"></pre>
    <pre id="error"></pre>
    <script>
        window.addTest = function(text) {
            document.querySelector("#test").textContent += text + "\n";
        };
        window.setError = function(text) {
            document.querySelector("#error").textContent += text + "\n";
        };
        const test = async function() {
            try {
                addTest("Test of Importer class");
                await importer.scriptSrc("test/scriptSrc.js");
                await importer.scriptSrcModule("test/scriptSrcModule.js");
                await importer.linkStylesheet("test/linkStylesheet.css");
                const txt = await importer.text("test/text.txt");
                if(txt.startsWith("...")) {
                    addTest("Test of importer.text completed");
                } else {
                    throw new Error("Text failed");
                }
                addTest("Test of importer.linkStylesheet completed");
                addTest("Test completed successfully!");
            } catch (error) {
                setError(error.name + ": " + error.message + "\n" + error.stack);
            }
        };
        window.addEventListener("load", test);
    </script>
</body>
</html>